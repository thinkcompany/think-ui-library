/* stylelint-disable selector-max-combinators, selector-max-compound-selectors */

$color-hover: #08519a;

.tco-newsletter-form {
  position: relative;
  z-index: 2;
  display: inline-flex;
  flex-flow: column wrap;
  align-items: center;
  justify-content: space-between;
  overflow: hidden;
  padding: $spacing-stack-32 $spacing-inline-40;
  border: $border-card;
  background-color: $color-foreground-on-tint;

  .tco-lights-out & {
    background-color: $color-classic-dark;
  }

  @include wider-than($breakpoint-laptop) {
    flex-flow: row nowrap;
    align-items: center;
    transform: translateY(-20px);
  }

  .tco-container-wrapper--glass & {
    @include wider-than($breakpoint-laptop) {
      align-items: center;
      transform: translateY(0);
    }
  }

  &-content-container {
    position: relative;
    display: flex;
    margin-bottom: $spacing-stack-24;

    @include wider-than($breakpoint-laptop) {
      margin-bottom: 0;
    }
  }

  &-content,
  &-disclaimer {
    max-width: 400px;
  }

  &-container {
    @include wider-than($breakpoint-tablet-portrait) {
      min-width: 480px;
    }

    @include wider-than($breakpoint-laptop) {
      min-width: 520px;
      margin-top: $spacing-stack-8;
    }
  }

  &-disclaimer {
    @include type-body-xsmall($font-size: $font-size-14);
    color: $color-classic-gray-medium;

    @include wider-than($breakpoint-laptop) {
      max-width: none;
    }
  }

  .tco-form-row,
  .gfield {
    margin-bottom: $spacing-stack-24;
  }

  .tco-doodle {
    @include pseudo-doodle;
    position: absolute;
    right: -105px;
    bottom: -130px;
    width: 240px;
    transform: rotate(200deg) scale(0.5);

    &::after {
      right: 20px;
      width: 220px;
      height: 55px;
      background-image: url("data:image/svg+xml,%3Csvg width='215' height='54' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.047 27.545L8.165 30.05c-.993 1.322-1.857 2.736-2.757 4.123-.152.235-.272.495-.406.738l-.91 1.66c-.174.32-.374.636-.523.97-.16.353-.317.707-.475 1.061-.346.774-.72 1.537-1.002 2.337l-.523 1.485c-.118.334-.268.671-.358 1.016-.15.563-.295 1.127-.443 1.691a23.195 23.195 0 00-.502 2.48 12.877 12.877 0 00-.016 3.813c.046.297.149.585.238.871.083.267.205.515.367.745.206.293.434.532.753.686l.015.013c.262.236.693.202.936-.028a.716.716 0 00.174-.767c.025-.203.057-.405.096-.605.052-.277.078-.557.136-.833.05-.243.078-.49.126-.734l-.014.064.082-.387.11-.509c.262-1.15.576-2.29.958-3.404l.63-1.836.547-1.344c.171-.42.319-.86.517-1.27.44-.916.885-1.832 1.327-2.747.29-.506.579-1.01.867-1.517l.613-1.067.155-.28c.027-.047.054-.092.084-.136.679-1.017 1.354-2.035 2.032-3.05l1.217-1.597c.274-.36.549-.718.822-1.079l.247-.33c.041-.055.084-.11.129-.161.908-1.046 1.818-2.09 2.727-3.136 1.03-1.035 2.052-2.076 3.082-3.11.157-.159.336-.3.503-.447.413-.369.827-.736 1.241-1.103.561-.498 1.121-.997 1.683-1.494l3.54-2.793.174-.128.36-.243 1.33-.928c.655-.455 1.309-.908 1.96-1.364l3.859-2.318c.187-.113.394-.202.588-.302l1.467-.75 2.165-1.108c1.357-.588 2.712-1.183 4.066-1.776.177-.077.363-.134.543-.2l1.523-.56 1.56-.575c.2-.074.4-.16.606-.225l1.944-.58 1.943-.583-.026.008.064-.019.04-.013-.002.002.004-.001.008-.003-.007.003 4.107-.93c1.248-.203 2.497-.407 3.744-.615.127-.016.255-.022.38-.034l1.31-.13c.674-.068 1.345-.133 2.017-.2l3.371-.09c.127-.002.255.01.383.015l1.182.051 1.77.075 2.135.242c1.162.13 2.31.322 3.456.569 1.193.275 2.365.606 3.52 1.014.897.34 1.772.723 2.626 1.16a23.51 23.51 0 012.124 1.294c.634.459 1.242.946 1.825 1.468.489.466.956.949 1.396 1.461.238.304.46.614.671.935.28.465.538.94.776 1.43.4.905.73 1.84 1.034 2.78.166.556.308 1.115.427 1.68a24.88 24.88 0 00-1.567.426c-.978.31-1.954.621-2.93.933l-.927.294c-.293.094-.58.225-.866.337l-2.612 1.016c-.352.137-.691.32-1.031.484l-1.678.798c-.672.32-1.31.69-1.96 1.054-.694.393-1.383.782-2.052 1.216-.963.628-1.93 1.241-2.856 1.922-3.476 2.556-7.169 6.126-7.135 10.784a6.416 6.416 0 00.768 2.972c.509.964 1.371 1.726 2.29 2.29.887.547 1.912.889 2.924 1.102 1.094.232 2.192.288 3.303.228 1.052-.059 2.096-.29 3.104-.576 1.197-.341 2.342-.815 3.46-1.354 1.204-.58 2.31-1.314 3.43-2.037.766-.496 1.475-1.085 2.175-1.667.918-.765 1.758-1.603 2.565-2.483 1.602-1.748 2.87-3.788 3.911-5.911a22.53 22.53 0 002.07-6.65c.092-.632.145-1.266.163-1.9 1.404-.29 2.809-.58 4.216-.866 1.413-.216 2.827-.434 4.24-.653.627-.097 1.257-.171 1.888-.238l1.895-.193 2.185-.231c.398-.042.8-.053 1.197-.077l4.58-.28c1.808-.032 3.615-.072 5.424-.106.465-.009.928 0 1.393.01 1.193.023 2.388.045 3.583.07.593.01 1.19.002 1.783.036.924.052 1.849.1 2.773.15 1.543.082 3.084.156 4.625.28 1.624.131 3.248.265 4.873.395 1.798.186 3.597.362 5.395.543l1.69.185 3.376.404c3.304.385 6.601.852 9.897 1.304 6.674.914 13.342 1.866 20.01 2.818 6.594.942 13.186 1.897 19.77 2.91 2.439.375 4.878.739 7.317 1.11l.339-.159a75.071 75.071 0 00-3.472 1.722 96.291 96.291 0 00-3.45 1.868 80.81 80.81 0 00-2.086 1.237 56.269 56.269 0 00-3.49 2.326 2.145 2.145 0 00-.476 2.977c.68.942 2.055 1.195 2.994.514a54.464 54.464 0 013.342-2.237 94.575 94.575 0 015.266-2.95c1.853-.97 3.717-1.914 5.622-2.779.78-.343 1.572-.665 2.346-1.021.424-.194.838-.394 1.232-.642.33-.205.641-.432.882-.73.065-.08.124-.164.177-.254.341-.583.143-1.314-.425-1.681a2.092 2.092 0 00-.255-.14 2.244 2.244 0 00-.797-1.777c-.384-.327-.77-.651-1.14-.992l.02.019-.456-.416a72.595 72.595 0 01-.488-.447l.017.016a93.53 93.53 0 01-5.05-5.112 161.065 161.065 0 01-5.27-6.011c-.884-1.08-1.759-2.165-2.652-3.237-.45-.54-.897-1.086-1.397-1.582-.353-.35-.742-.671-1.227-.815-.535-.161-1.204-.045-1.546.426-.29.395-.404.858-.35 1.348.052.462.222.915.411 1.338.35.786.826 1.505 1.31 2.215.86 1.263 1.823 2.466 2.788 3.652a120.624 120.624 0 006.131 6.95 99.728 99.728 0 002.284 2.325c-2.01-.355-4.022-.697-6.04-1.017-3.203-.508-6.412-.98-9.62-1.453-6.62-.975-13.242-1.924-19.867-2.856-6.987-.983-13.975-1.96-20.973-2.86-3.325-.43-6.66-.77-9.995-1.105-1.587-.16-3.173-.292-4.763-.42-1.528-.125-3.054-.253-4.585-.335l-3.606-.195c-.527-.029-1.056-.069-1.583-.08-1.983-.038-3.966-.075-5.95-.115h-.562l-1.125.03-3.537.067c-1.648.032-3.293.155-4.937.255-.693.042-1.398.055-2.088.129l-2.701.286-2.703.285c-.73.078-1.46.224-2.188.336l-2.86.44c-.75.116-1.491.293-2.234.445l-1.722.353c-.05-.241-.103-.481-.161-.721-.26-1.08-.64-2.135-1.025-3.175a17.621 17.621 0 00-1.52-3.117c-1.25-2.025-3.042-3.706-4.97-5.09a23.7 23.7 0 00-2.857-1.752 28.192 28.192 0 00-3.476-1.497c-1.074-.385-2.176-.682-3.286-.942a39.971 39.971 0 00-1.607-.34C73.33.804 72.783.695 72.241.634L69.354.307c-.807-.09-1.618-.103-2.428-.136-.52-.023-1.039-.046-1.558-.067-.5-.02-1.012.027-1.513.041l-1.99.052c-.434.012-.86.059-1.293.103-1.133.112-2.277.185-3.4.37l-3.707.61.19-.03c-.76.128-1.508.328-2.257.497-.775.176-1.568.318-2.328.547l.262-.079c-1.44.43-2.88.861-4.319 1.293l.083-.024c-.768.234-1.517.543-2.27.821-.52.19-1.04.383-1.562.575-.219.081-.446.152-.66.244-.867.381-1.735.76-2.602 1.139-.669.292-1.362.555-2.01.888-.923.472-1.846.944-2.767 1.418l-.826.415c-.274.14-.546.285-.81.444l-2.842 1.71c-.535.322-1.072.635-1.584.991-1.368.957-2.773 1.87-4.081 2.905L20.42 17.14c-.489.386-.954.79-1.42 1.205l-2.495 2.224c-.467.417-.893.88-1.332 1.326l-2.035 2.066c-.187.191-.358.396-.53.598L11.47 25.88l-1.04 1.208c-.13.151-.264.299-.383.457zm59.483 5.693a24.864 24.864 0 012.083-1.912 32.699 32.699 0 012.591-1.878c.565-.368 1.13-.737 1.696-1.104l1.316-.74c.426-.241.847-.516 1.289-.725l2.826-1.346c.576-.224 1.151-.447 1.726-.672.416-.163.833-.324 1.249-.486.147-.058.294-.123.444-.171l3.736-1.19.28-.072c-.058.433-.13.863-.218 1.29a23.324 23.324 0 01-.6 2.112c-.338.93-.729 1.835-1.17 2.72a26.03 26.03 0 01-1.588 2.62c-.5.688-1.032 1.347-1.602 1.977-.7.737-1.44 1.426-2.22 2.08a21.9 21.9 0 01-1.867 1.368l-1.194.77a25.73 25.73 0 01-2.095 1.087c-.63.27-1.267.509-1.92.715-.513.145-1.028.268-1.552.363-.359.05-.717.087-1.08.11-.32.005-.64-.004-.963-.024a12.003 12.003 0 01-.948-.147c-.27-.069-.536-.146-.802-.233a8.463 8.463 0 01-.568-.25 8.285 8.285 0 01-.383-.234 4.433 4.433 0 01-.153-.125c-.08-.08-.155-.16-.23-.244l-.08-.113a3.812 3.812 0 01-.087-.162 3.4 3.4 0 01-.084-.22 3.366 3.366 0 01-.028-.116 7.012 7.012 0 01-.048-.45c0-.105.001-.212.006-.318.021-.199.05-.395.085-.593.058-.24.125-.474.2-.709.098-.252.204-.498.32-.74.192-.352.4-.69.626-1.02a16.17 16.17 0 011.007-1.218z' fill='%230062C3' fill-rule='evenodd'/%3E%3C/svg%3E");
    }

    @include wider-than($breakpoint-laptop) {
      position: relative;
      right: auto;
      bottom: auto;
      transform: none;
    }
  }

  .newsletter-form {
    display: flex;
    flex-flow: column wrap;

    @include wider-than($breakpoint-laptop) {
      flex-flow: row nowrap;
    }

    .gform_body {
      flex-grow: 2;
    }

    .gform_footer {
      display: flex;
      align-items: flex-end;
      justify-content: flex-start;
      margin: 0 0 $spacing-stack-16;

      @include wider-than($breakpoint-laptop) {
        justify-content: center;
        margin: 0 0 $spacing-stack-24 $spacing-inline-16;
      }
    }

    .validation_error {
      @include type-body-small($color-tint-red-primary);

      @include wider-than($breakpoint-laptop) {
        position: absolute;
        top: $spacing-stack-12;
      }
    }
  }

  .gform_button {
    @extend %tco-btn--secondary;

    &:hover {
      background-color: $color-classic-blue;
      color: $color-foreground-on-tint;
    }

    &:active {
      border-color: $color-hover;
    }

    &[disabled],
    &:disabled {
      background-color: transparent;
    }
  }

  .gfield_validation_error & {
    align-items: center;
  }

  .gfield_error {
    height: auto;
    margin-bottom: $spacing-stack-12;
  }

  .gfield_error > .ginput_container > input {
    padding: 5px $spacing-inline-4;
  }

  .tco-newsletter-form-disclaimer {
    margin-bottom: 0;
    line-height: 1.4;
  }
}

.newsletter-form_wrapper {
  &.gform_validation_error {
    .gform_footer {
      margin-bottom: 33px;
    }
  }
}
